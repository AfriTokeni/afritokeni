echo "ğŸ” Running pre-commit checks..."

# Secret detection (fast - only staged files)
echo "ğŸ” Checking for secrets..."
git diff --cached --name-only | xargs -I {} gitleaks detect --no-git --verbose --source {} 2>/dev/null || {
  echo "âš ï¸  Gitleaks not installed. Skipping secret scan."
  echo "   Install: brew install gitleaks"
}

# Format code
echo "ğŸ“ Formatting code..."
pnpm run format || exit 1

# Lint (treat warnings as errors)
echo "ğŸ” Linting code..."
pnpm run lint || exit 1

# TypeScript check
echo "ğŸ”§ Type checking..."
pnpm run check || exit 1

echo "âœ… All pre-commit checks passed!"
echo "ğŸ’¡ Full security scans will run in CI pipeline"
